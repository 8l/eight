<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
  <head> 
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8"/> 
    <title>Eight</title> 
    <link href="style.css" title="Medium" rel="stylesheet" /> 

    <script src="CodeMirror-0.91/js/codemirror.js" type="text/javascript">
    </script> 
    <script src="CodeMirror-0.91/js/mirrorframe.js" type="text/javascript">
    </script> 

    <script src="eight.js" type="text/javascript"></script> 
  </head> 
  <body> 
    <table>
      <tr>
	<td rowspan=3>
	    <textarea id="code" cols="80"> 
	      (define (factorial x))
	</textarea></td>
	<td rowspan=2><p>Stack trace</p></td>
      </tr>
      <tr>
      </tr>
      <tr>
	<td rowspan=2><p>Help</p></td>
      </tr>
      <tr>
	<td><p>output</p></td>
      </tr>
    </table>

<script type="text/javascript"> 
  function addClass(element, className) {
    if (!editor.win.hasClass(element, className)) {
      element.className = ((element.className.split(" ")).concat([className])).join(" ");
    }
  }
 
  function removeClass(element, className) {
    if (editor.win.hasClass(element, className)) {
      var classes = element.className.split(" ");
      for (var i = classes.length - 1 ; i >= 0; i--) {
        if (classes[i] === className) {
            classes.splice(i, 1);
        }
      }
      element.className = classes.join(" ");
    }
  }
 
  var textarea = document.getElementById('code');
  var editor = new CodeMirror(CodeMirror.replace(textarea), {
    height: "350px",
    content: textarea.value,
    path: "CodeMirror-0.91/js/",
    parserfile: ["../contrib/scheme/js/tokenizescheme.js",
                 "../contrib/scheme/js/parsescheme.js"],
    stylesheet:  "CodeMirror-0.91/contrib/scheme/css/schemecolors.css",
    autoMatchParens: true,
    lineNumbers: true,
    disableSpellcheck: true,
    markParen: function(span, good) {addClass(span, good ? "good-matching-paren" : "bad-matching-paren");},
    unmarkParen: function(span) {removeClass(span, "good-matching-paren"); removeClass(span, "bad-matching-paren");}
  });
</script> 
<a onclick="doit();">Click me</a>
  </body> 
</html> 
